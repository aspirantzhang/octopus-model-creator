<?php

namespace app\api\validate;

use think\Validate;

class UnitTest extends Validate
{
    protected $rule = [
        'id' => 'require|number',
        'ids' => 'require|numberArray',
        'status' => 'numberArray',
        'page' => 'number',
        'per_page' => 'number',
        'create_time' => 'dateTimeRange',
        'parent_id' => 'number|checkParentId',
        'revisionId' => 'require|number',
        'title' => 'require|length:0,255',
        'pathname' => 'require|length:0,255',
        'category' => 'numberArray',
        'listOrder' => 'number',
    ];

    protected $message = [
        'id.require' => 'id#require',
        'id.number' => 'id#number',
        'ids.require' => 'ids#require',
        'ids.numberArray' => 'ids#numberArray',
        'status.numberArray' => 'status#numberArray',
        'page.number' => 'page#number',
        'per_page.number' => 'per_page#number',
        'create_time.dateTimeRange' => 'create_time#dateTimeRange',
        'parent_id.number' => 'parent_id#number',
        'parent_id.checkParentId' => 'parent_id#checkParentId',
        'revisionId.require' => 'revisionId#require',
        'revisionId.number' => 'revisionId#number',
        'title.require' => 'unit-test@title#require',
        'title.length' => 'unit-test@title#length:0,255',
        'pathname.require' => 'unit-test@pathname#require',
        'pathname.length' => 'unit-test@pathname#length:0,255',
        'category.numberArray' => 'unit-test@category#numberArray',
        'listOrder.number' => 'unit-test@listOrder#number',
    ];

    protected $scene = [
        'save' => ['create_time', 'status', 'title', 'pathname', 'category', 'listOrder'],
        'update' => ['id', 'create_time', 'status', 'title', 'pathname', 'category', 'listOrder'],
        'read' => ['id'],
        'delete' => ['ids'],
        'restore' => ['ids'],
        'add' => [''],
        'i18n_read' => ['id'],
        'i18n_update' => ['id'],
        'revision_home' => ['page', 'per_page'],
        'revision_restore' => ['revisionId'],
        'revision_read' => [''],
    ];

    public function sceneHome()
    {
        $this->only(['page', 'per_page', 'id', 'status', 'create_time', 'title', 'pathname', 'category', 'listOrder'])
            ->remove('title', 'require')
            ->remove('pathname', 'require')
            ->remove('category', 'require')
            ->remove('listOrder', 'require')
            ->remove('id', 'require')
            ->remove('create_time', 'require');
    }
}
